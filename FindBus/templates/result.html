{% extends "base.html" %} 

{% block page_header %}
<h2>{{ dept.s_name }} <small class="mx-2 text-secondary fs-5"><i class="fas fa-arrow-right"></i></small> {{ dest.s_name}}</h2>
{% endblock page_header %}

{% block content %}

  <div class="container mb-5 col-6 shadow rounded border border-info">
    <div class="row justify-content-center">
      {% if buses|length > 1 %}
        <a href="#res" class="col col-12 py-2 btn text-black d-flex justify-content-center align-items-center"><h5>{{ buses|length }} Buses Found </h5></a>
      {% elif buses|length == 1 %}
        <a class="col col-12 py-2 btn text-black d-flex justify-content-center align-items-center"><h5>{{ buses|length }} Bus Found </h5></a>
      {% else %}
        <a class="col col-12 py-2 btn text-black d-flex justify-content-center align-items-center"><h5>No Bus Found ! </h5></a>
      {% endif %}
    </div>
  </div>

  {% for bus in buses %}

    <div id="res" class="container mb-5 col-12 shadow rounded border border-info text-center">

      
      <div class="row justify-content-center mb-3">

        <a style="background-color:rgb(59, 4, 122)" href="{% url 'bus' bus.obj.id %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn shadow shadow-lg border border-white text-white d-flex justify-content-center align-items-center"><i class="fas fa-shuttle-van px-2"></i><h5><b>{{ bus.obj.b_name }}</b></h5></a>

        <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="far fa-clock px-2"></i>{{ bus.busTime }}</a>

        <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="fas fa-map px-2"></i>{{ bus.dist }} Km </a>

        <a href="{% url 'suggest_result' dept.id dest.id bus.obj.id bus.dist|stringformat:"0.2f" bus.busTime %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn btn-secondary shadow border text-white d-flex justify-content-center align-items-center"><i class="fas fa-edit px-2"></i> Suggest Correction</a>


      </div>




      <div class="row">

        <div class="col col-12 d-flex align-items-center flex-wrap">
          {% for stand in bus.route %}
          
            {% if forloop.first %}
              <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
              <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
            {% elif forloop.last %}
              <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
            {% else %}
              <p class="border border-primary rounded-pill p-2 text-nowrap">{{ stand.s_name }}</p>
              <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
            {% endif %}

          {% endfor %}
            
        </div>

      </div>


    </div>

    {% empty %}
      <li><h3>No bus Found !</h3></li>

{% endfor %}



<div class="container mt-5 d-flex justify-content-center">
    <a href="{% url 'findBus' %}">
      <button style="background-color: rgb(8, 71, 131);" class="btn btn-lg text-white text-lg">Make Another Search</button>
    </a>
</div>


{% endblock content %}
