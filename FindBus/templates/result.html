{% extends "base.html" %} 

{% block page_header %}
<h2>{{ dept.s_name }} <small class="mx-2 text-secondary fs-5"><i class="fas fa-arrow-right"></i></small> {{ dest.s_name}}</h2>
{% endblock page_header %}

{% block content %}

  <div class="container mb-3 col-6 shadow rounded border border-info">
    <div class="row justify-content-center">
      {% if buses|length > 1 %}
        <a style="background-color:rgb(7, 160, 20)" href="#res" class="col col-12 py-2 btn text-white d-flex justify-content-center align-items-center"><b class="mx-2">{{ buses|length }} </b>Buses Found</a>
      {% elif buses|length == 1 %}
      <a style="background-color:rgb(4, 107, 133)" href="#res" class="col col-12 py-2 btn text-white d-flex justify-content-center align-items-center"><b class="mx-2">{{ buses|length }} </b>Bus Found</a>
      {% else %}
      <a style="background-color:rgb(238, 187, 20)" class="col col-12 py-2 btn text-white d-flex justify-content-center align-items-center">No Bus goes to {{dest.s_name}} from {{dept.s_name}} !</a>
      {% endif %}
    </div>
  </div>

  {% for bus in buses %}

    <div id="res" class="container mb-5 col-12 shadow rounded border border-info text-center">

      
      <div class="row justify-content-center mb-3">

        <a style="background-color:rgb(59, 4, 122)" href="{% url 'bus' bus.obj.id %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn shadow shadow-lg border border-white text-white d-flex justify-content-center align-items-center"><i class="fas fa-shuttle-van px-2"></i><h5><b>{{ bus.obj.b_name }}</b></h5></a>

        <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="far fa-clock px-2"></i>{{ bus.busTime }}</a>

        <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="fas fa-map-marker-alt px-2 text-danger"></i>{{ bus.dist }} Km </a>

        <a href="{% url 'suggest_result' dept.id dest.id bus.obj.id bus.dist|stringformat:"0.2f" bus.busTime %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn btn-secondary shadow border text-white d-flex justify-content-center align-items-center"><i class="fas fa-edit px-2"></i> Suggest Correction</a>


      </div>




      <div class="row">

        <div class="col col-12 d-flex align-items-center flex-wrap">
          {% for stand in bus.route %}
          
            {% if forloop.first %}
              <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
              <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
            {% elif forloop.last %}
              <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
            {% else %}
              <p class="border border-primary rounded-pill p-2 text-nowrap">{{ stand.s_name }}</p>
              <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
            {% endif %}

          {% endfor %}
            
        </div>

      </div>


    </div>


  {% empty %}

    {% if fracBus %}

      <div class="container mb-4 col-12">

        <div class="row mb-2 justify-content-center">
          <a style="background-color:rgb(5, 102, 81)" href="#res"  class="col col-9 py-2 btn text-white d-flex justify-content-center align-items-center">No Worries ! You can take Two Buses </a>
        </div>

      </div>





      <div id="res" class="container mb-5 col-12 shadow rounded border border-info text-center">



        <div class="row justify-content-center mb-3">

          <a style="background-color:#da3790" href=#" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn shadow shadow-lg border border-white text-white d-flex justify-content-center align-items-center"><h5><b>Journey Summary</b></h5></a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="far fa-clock px-2"></i>{{ fracBus.busTime }}</a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="fas fa-map-marker-alt px-2 text-danger"></i>{{ fracBus.dist }} Km </a>

          <a href="#" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn btn-secondary shadow border text-white d-flex justify-content-center align-items-center"><i class="fas fa-edit px-2"></i> Suggest Correction</a>


        </div>


        <div class="row justify-content-center">
          <div class="col col-12 d-flex justify-content-center align-items-center flex-wrap">

            <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ dept.s_name }}</p>
            <p class="mx-1"><i class="fas fa-arrow-right"></i></p>

            <p class="border border-primary p-2 text-nowrap"><i class="fas fa-shuttle-van px-2"></i>{{ firstBus.bus.b_name }}</p>
            <p class="mx-1"><i class="fas fa-arrow-right"></i></p>

            <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #7c0842">{{ fracBus.inter.s_name }}</p>
            <p class="mx-1"><i class="fas fa-arrow-right"></i></p>

            <p class="border border-primary p-2 text-nowrap"><i class="fas fa-shuttle-van px-2"></i>{{ secondBus.bus.b_name }}</p>
            <p class="mx-1"><i class="fas fa-arrow-right"></i></p>

            <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ dest.s_name }}</p>

          </div>
        </div>


        <div class="row">
          <p class="p-2 text-black">Travel by {{ firstBus.bus.b_name }} from {{ dept.s_name }}  to {{ fracBus.inter.s_name }} , Then take {{ secondBus.bus.b_name }} from {{ fracBus.inter.s_name }} to reach {{ dest.s_name }} </p>
        </div>
        


        <div class="row">
          <a class="btn shadow shadow-lg border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #da3790"><h5><b>Journey Details</b></h5></a>
        </div>




          
        <div class="row justify-content-center mb-3">

          <a style="background-color:rgb(59, 4, 122)" href="{% url 'bus' firstBus.bus.id %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn shadow shadow-lg border border-white text-white d-flex justify-content-center align-items-center"><i class="fas fa-shuttle-van px-2"></i><h5><b>{{ firstBus.bus.b_name }}</b></h5></a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="far fa-clock px-2"></i>{{ firstBus.busTime }}</a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="fas fa-map-marker-alt px-2 text-danger"></i>{{ firstBus.dist }} Km </a>

          <a href="#" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn btn-secondary shadow border text-white d-flex justify-content-center align-items-center"><i class="fas fa-edit px-2"></i> Suggest Correction</a>


        </div>




        <div class="row">

          <div class="col col-12 d-flex align-items-center flex-wrap">
            {% for stand in firstBus.route %}
            
              {% if forloop.first %}
                <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
                <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
              {% elif forloop.last %}
                <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #7c0842">{{ stand.s_name }}</p>
              {% else %}
                <p class="border border-primary rounded-pill p-2 text-nowrap">{{ stand.s_name }}</p>
                <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
              {% endif %}

            {% endfor %}
              
          </div>

        </div>




        <div class="row justify-content-center mb-3">

          <a style="background-color:rgb(59, 4, 122)" href="{% url 'bus' secondBus.bus.id %}" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn shadow shadow-lg border border-white text-white d-flex justify-content-center align-items-center"><i class="fas fa-shuttle-van px-2"></i><h5><b>{{ secondBus.bus.b_name }}</b></h5></a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="far fa-clock px-2"></i>{{ secondBus.busTime }}</a>

          <a class="col gy-3 col-6 col-sm-6 col-md-3 col-lg-3 btn text-black d-flex justify-content-center align-items-center"><i class="fas fa-map-marker-alt px-2 text-danger"></i>{{ secondBus.dist }} Km </a>

          <a href="#" class="col gy-3 col-12 col-sm-12 col-md-3 col-lg-3 btn btn-secondary shadow border text-white d-flex justify-content-center align-items-center"><i class="fas fa-edit px-2"></i> Suggest Correction</a>


        </div>




        <div class="row">

          <div class="col col-12 d-flex align-items-center flex-wrap">
            {% for stand in secondBus.route %}
            
              {% if forloop.first %}
                <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #7c0842">{{ stand.s_name }}</p>
                <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
              {% elif forloop.last %}
                <p class="border border-primary rounded-pill p-2 text-nowrap text-white" style="background-color: #20b35d">{{ stand.s_name }}</p>
              {% else %}
                <p class="border border-primary rounded-pill p-2 text-nowrap">{{ stand.s_name }}</p>
                <p class="mx-1"><i class="fas fa-arrow-right"></i></p>
              {% endif %}

            {% endfor %}
              
          </div>

        </div>

        

      </div>

    {% else %}

      <div class="container mb-5 col-6 shadow rounded border border-info">
        <div class="row justify-content-center">
          <a style="background-color:rgb(238, 45, 20)" class="col col-12 py-2 btn text-black d-flex justify-content-center align-items-center">No Bus Found !</a>
        </div>
      </div>

    {% endif %}
      

  {% endfor %}




<div class="container mt-5 d-flex justify-content-center">
    <a href="{% url 'findBus' %}">
      <button style="background-color: rgb(8, 71, 131);" class="btn btn-lg text-white text-lg">Make Another Search</button>
    </a>
</div>


{% endblock content %}
